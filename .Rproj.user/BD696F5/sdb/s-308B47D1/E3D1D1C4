{
    "contents" : "library(XML)\n#Read the file\n\n#source all the files in R folder\npath<-list.files(pattern=\"[.]R$\", path=\"../R/\", full.names=TRUE)\nsapply(path, source)\n\ntemp<-NULL\ntemp1<-NULL\ntemp2<-NULL\n\noutcome_struct<-c(\"measure\",\"time_frame\",\"safety_issue\",\"description\")\ncondition_struct<-c(\"condition\")\narm_group_struct<-c(\"arm_group_label\",\"arm_group_type\",\"description\")\nintervention_struct<-c(\"intervention_type\",\"intervention_name\",\"description\",\"arm_group_label\",\"other_name\")\neligibilit_struct<-c(\"study_pop/textblock\",\"sampling_method\",\"criteria/textblock\",\"gender\",\"minimum_age\",\"maximum_age\")\ninvestigator_struct<-c(\"first_name\",\"last_name\",\"middle_name\",\"degrees\",\"role\",\"affiliation\")\nother_tables<<-list(primary_outcome=outcome_struct,secondary_outcome=outcome_struct,other_outcome=outcome_struct,condition=condition_struct,arm_group=arm_group_struct,intervention=intervention_struct,eligibility=eligibilit_struct,overall_official=investigator_struct)\n\ntemporary_variables<<-paste(names(other_tables),\"temp\",sep=\"_\")\na<-c(1,1,1,1,1)\nfor(var in temporary_variables){assign(var,NULL)}\n\ncreate_observation<-function(file)\n{\nxmlDoc<-xmlTreeParse(file)\nxmltop<<-xmlRoot(xmlDoc)\n#get the node\n\n\nxmlNodes<-c(\"nct_id\",\"brief_title\",\"acronym\",\"official_title\",\"source\",\"brief_summary/textblock\",\"detailed_description/textblock\",\"overall_status\",\"start_date\",\"completion_date\",\"primary_completion_date\",\"phase\",\"study_type\",\"study_design\",\"target_duration\",\"number_of_arms\",\"number_of_groups\",\"primary_outcome\",\"secondary_outcome\",\"other_outcome\",\"condition\",\"arm_group\",\"intervention\",\"biospec_retention\",\"biospec_descr/textblock\",\"eligibility\",\"overall_official\")\n#xmlNodes<-c(\"primary_outcome\")\n\nsapply(xmlNodes,function(node) getNodeAndCreateCell(node))\n\nobservation<<-data.frame(nct_id,brief_title,acronym,official_title,source,brief_summary,detailed_description,overall_status,start_date,completion_date,primary_completion_date,phase,study_type,study_design,target_duration,number_of_arms,number_of_groups,biospec_retention,biospec_descr,stringsAsFactors = FALSE)\n#names(observation)[6]<-\"brief_summary\"\n#names(observation)[7]<-\"det-description\"\ntemp<<-rbind(temp,observation)\n}\n\nfiles<-dir()\nsapply(files,function(file) create_observation(file))\nrm(list=temporary_variables)\nobservation<-temp\nrm(temp)",
    "created" : 1440877319976.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2644582287",
    "id" : "E3D1D1C4",
    "lastKnownWriteTime" : 1440955067,
    "path" : "C:/Users/shany_000/Desktop/clinical_trials_R/R-Start/main.R",
    "project_path" : "R-Start/main.R",
    "properties" : {
    },
    "relative_order" : 5,
    "source_on_save" : false,
    "type" : "r_source"
}